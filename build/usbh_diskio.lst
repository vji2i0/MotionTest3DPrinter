ARM GAS  /tmp/cck0gfKE.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"usbh_diskio.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.USBH_initialize,"ax",%progbits
  16              		.align	1
  17              		.global	USBH_initialize
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	USBH_initialize:
  25              	.LVL0:
  26              	.LFB68:
  27              		.file 1 "Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c"
   1:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
   2:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   ******************************************************************************
   3:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @file    usbh_diskio.c 
   4:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @author  MCD Application Team
   5:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @version V1.4.1
   6:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @date    14-February-2017
   7:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief   USB Key Disk I/O driver.
   8:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   ******************************************************************************
   9:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @attention
  10:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *
  11:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * <h2><center>&copy; COPYRIGHT 2017 STMicroelectronics</center></h2>
  12:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *
  13:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * Redistribution and use in source and binary forms, with or without 
  14:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * modification, are permitted, provided that the following conditions are met:
  15:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *
  16:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  17:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    this list of conditions and the following disclaimer.
  18:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    this list of conditions and the following disclaimer in the documentation
  20:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    and/or other materials provided with the distribution.
  21:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  22:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    contributors to this software may be used to endorse or promote products 
  23:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    derived from this software without specific written permission.
  24:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * 4. This software, including modifications and/or derivative works of this 
  25:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    software, must execute solely and exclusively on microcontroller or
  26:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  27:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * 5. Redistribution and use of this software other than as permitted under 
  28:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    this license is void and will automatically terminate your rights under 
  29:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *    this license. 
  30:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *
  31:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
ARM GAS  /tmp/cck0gfKE.s 			page 2


  32:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  33:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  34:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  35:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  36:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  37:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  38:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  39:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  40:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  41:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  42:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  43:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   *
  44:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   ******************************************************************************
  45:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */ 
  46:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  47:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Includes ------------------------------------------------------------------*/
  48:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #include <string.h>
  49:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #include "ff_gen_drv.h"
  50:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  51:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Private typedef -----------------------------------------------------------*/
  52:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Private define ------------------------------------------------------------*/
  53:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Private variables ---------------------------------------------------------*/
  54:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** extern USBH_HandleTypeDef  HOST_HANDLE;
  55:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_BUFF_WO_ALIGNMENT == 0
  56:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Local buffer use to handle buffer not aligned 32bits*/
  57:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** static DWORD scratch[_MAX_SS / 4];
  58:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif
  59:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  60:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Private function prototypes -----------------------------------------------*/
  61:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DSTATUS USBH_initialize (BYTE);
  62:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DSTATUS USBH_status (BYTE);
  63:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DRESULT USBH_read (BYTE, BYTE*, DWORD, UINT);
  64:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  65:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_WRITE == 1
  66:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT USBH_write (BYTE, const BYTE*, DWORD, UINT);
  67:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_WRITE == 1 */
  68:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  69:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_IOCTL == 1
  70:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT USBH_ioctl (BYTE, BYTE, void*);
  71:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_IOCTL == 1 */
  72:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
  73:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** const Diskio_drvTypeDef  USBH_Driver =
  74:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
  75:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_initialize,
  76:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_status,
  77:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_read, 
  78:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if  _USE_WRITE == 1
  79:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_write,
  80:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_WRITE == 1 */  
  81:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if  _USE_IOCTL == 1
  82:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_ioctl,
  83:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_IOCTL == 1 */
  84:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** };
  85:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  86:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /* Private functions ---------------------------------------------------------*/
  87:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  88:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
ARM GAS  /tmp/cck0gfKE.s 			page 3


  89:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief  Initializes a Drive
  90:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  lun : lun id
  91:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @retval DSTATUS: Operation status
  92:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */
  93:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DSTATUS USBH_initialize(BYTE lun)
  94:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
  28              		.loc 1 94 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  95:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   return RES_OK;
  33              		.loc 1 95 3 view .LVU1
  96:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** }
  34              		.loc 1 96 1 is_stmt 0 view .LVU2
  35 0000 0020     		movs	r0, #0
  36              	.LVL1:
  37              		.loc 1 96 1 view .LVU3
  38 0002 7047     		bx	lr
  39              		.cfi_endproc
  40              	.LFE68:
  42              		.section	.text.USBH_status,"ax",%progbits
  43              		.align	1
  44              		.global	USBH_status
  45              		.syntax unified
  46              		.thumb
  47              		.thumb_func
  48              		.fpu softvfp
  50              	USBH_status:
  51              	.LVL2:
  52              	.LFB69:
  97:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
  98:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
  99:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief  Gets Disk Status
 100:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  lun : lun id
 101:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @retval DSTATUS: Operation status
 102:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */
 103:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DSTATUS USBH_status(BYTE lun)
 104:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
  53              		.loc 1 104 1 is_stmt 1 view -0
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 0
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57              		.loc 1 104 1 is_stmt 0 view .LVU5
  58 0000 08B5     		push	{r3, lr}
  59              	.LCFI0:
  60              		.cfi_def_cfa_offset 8
  61              		.cfi_offset 3, -8
  62              		.cfi_offset 14, -4
  63 0002 0146     		mov	r1, r0
 105:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR;
  64              		.loc 1 105 3 is_stmt 1 view .LVU6
  65              	.LVL3:
 106:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 107:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   if(USBH_MSC_UnitIsReady(&HOST_HANDLE, lun))
  66              		.loc 1 107 3 view .LVU7
  67              		.loc 1 107 6 is_stmt 0 view .LVU8
ARM GAS  /tmp/cck0gfKE.s 			page 4


  68 0004 0348     		ldr	r0, .L6
  69              	.LVL4:
  70              		.loc 1 107 6 view .LVU9
  71 0006 FFF7FEFF 		bl	USBH_MSC_UnitIsReady
  72              	.LVL5:
  73              		.loc 1 107 5 view .LVU10
  74 000a 08B1     		cbz	r0, .L4
 108:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 109:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_OK;
  75              		.loc 1 109 9 view .LVU11
  76 000c 0020     		movs	r0, #0
  77              	.L3:
  78              	.LVL6:
 110:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 111:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   else
 112:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 113:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_ERROR;
 114:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 115:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 116:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   return res;
  79              		.loc 1 116 3 is_stmt 1 view .LVU12
 117:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** }
  80              		.loc 1 117 1 is_stmt 0 view .LVU13
  81 000e 08BD     		pop	{r3, pc}
  82              	.LVL7:
  83              	.L4:
 113:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
  84              		.loc 1 113 9 view .LVU14
  85 0010 0120     		movs	r0, #1
  86 0012 FCE7     		b	.L3
  87              	.L7:
  88              		.align	2
  89              	.L6:
  90 0014 00000000 		.word	hUsbHostFS
  91              		.cfi_endproc
  92              	.LFE69:
  94              		.section	.text.USBH_read,"ax",%progbits
  95              		.align	1
  96              		.global	USBH_read
  97              		.syntax unified
  98              		.thumb
  99              		.thumb_func
 100              		.fpu softvfp
 102              	USBH_read:
 103              	.LVL8:
 104              	.LFB70:
 118:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 119:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
 120:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief  Reads Sector(s) 
 121:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  lun : lun id
 122:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  *buff: Data buffer to store read data
 123:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  sector: Sector address (LBA)
 124:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  count: Number of sectors to read (1..128)
 125:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @retval DRESULT: Operation result
 126:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */
 127:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DRESULT USBH_read(BYTE lun, BYTE *buff, DWORD sector, UINT count)
 128:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
ARM GAS  /tmp/cck0gfKE.s 			page 5


 105              		.loc 1 128 1 is_stmt 1 view -0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 56
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 129:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR;
 109              		.loc 1 129 3 view .LVU16
 130:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   MSC_LUNTypeDef info;
 110              		.loc 1 130 3 view .LVU17
 131:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_StatusTypeDef  status = USBH_OK;
 111              		.loc 1 131 3 view .LVU18
 132:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 133:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   if ((DWORD)buff & 3) /* DMA Alignment issue, do single up to aligned buffer */
 112              		.loc 1 133 3 view .LVU19
 113              		.loc 1 133 6 is_stmt 0 view .LVU20
 114 0000 11F0030F 		tst	r1, #3
 115 0004 01D0     		beq	.L18
 134:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 135:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_BUFF_WO_ALIGNMENT == 0
 136:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     while ((count--)&&(status == USBH_OK))
 137:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 138:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       status = USBH_MSC_Read(&HOST_HANDLE, lun, sector + count, (uint8_t *)scratch, 1);
 139:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       if(status == USBH_OK)
 140:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       {
 141:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****         memcpy (&buff[count * _MAX_SS] ,scratch, _MAX_SS);
 142:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       }
 143:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       else
 144:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       {
 145:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****         break;
 146:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       }
 147:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 148:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #else
 149:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     return res;
 116              		.loc 1 149 12 view .LVU21
 117 0006 0120     		movs	r0, #1
 118              	.LVL9:
 150:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif
 151:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 152:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   else
 153:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     status = USBH_MSC_Read(&HOST_HANDLE, lun, sector, buff, count);
 155:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 156:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 157:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   if(status == USBH_OK)
 158:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 159:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_OK;
 160:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 161:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   else
 162:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 163:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     USBH_MSC_GetLUNInfo(&HOST_HANDLE, lun, &info); 
 164:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 165:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     switch (info.sense.asc)
 166:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 167:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_LOGICAL_UNIT_NOT_READY:
 168:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_MEDIUM_NOT_PRESENT:
 169:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_NOT_READY_TO_READY_CHANGE: 
 170:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       USBH_ErrLog ("USB Disk is not ready!");  
 171:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_NOTRDY;
ARM GAS  /tmp/cck0gfKE.s 			page 6


 172:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break; 
 173:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       
 174:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     default:
 175:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_ERROR;
 176:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 177:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 178:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 179:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 180:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   return res;
 181:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** }
 119              		.loc 1 181 1 view .LVU22
 120 0008 7047     		bx	lr
 121              	.LVL10:
 122              	.L18:
 128:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR;
 123              		.loc 1 128 1 view .LVU23
 124 000a 10B5     		push	{r4, lr}
 125              	.LCFI1:
 126              		.cfi_def_cfa_offset 8
 127              		.cfi_offset 4, -8
 128              		.cfi_offset 14, -4
 129 000c 90B0     		sub	sp, sp, #64
 130              	.LCFI2:
 131              		.cfi_def_cfa_offset 72
 132 000e 0446     		mov	r4, r0
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 133              		.loc 1 154 5 is_stmt 1 view .LVU24
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 134              		.loc 1 154 14 is_stmt 0 view .LVU25
 135 0010 0093     		str	r3, [sp]
 136 0012 0B46     		mov	r3, r1
 137              	.LVL11:
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 138              		.loc 1 154 14 view .LVU26
 139 0014 0146     		mov	r1, r0
 140              	.LVL12:
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 141              		.loc 1 154 14 view .LVU27
 142 0016 0D48     		ldr	r0, .L21
 143              	.LVL13:
 154:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 144              		.loc 1 154 14 view .LVU28
 145 0018 FFF7FEFF 		bl	USBH_MSC_Read
 146              	.LVL14:
 157:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 147              		.loc 1 157 3 is_stmt 1 view .LVU29
 157:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 148              		.loc 1 157 5 is_stmt 0 view .LVU30
 149 001c 08B9     		cbnz	r0, .L19
 150              	.LVL15:
 151              	.L9:
 152              		.loc 1 181 1 view .LVU31
 153 001e 10B0     		add	sp, sp, #64
 154              	.LCFI3:
 155              		.cfi_remember_state
 156              		.cfi_def_cfa_offset 8
 157              		@ sp needed
ARM GAS  /tmp/cck0gfKE.s 			page 7


 158 0020 10BD     		pop	{r4, pc}
 159              	.LVL16:
 160              	.L19:
 161              	.LCFI4:
 162              		.cfi_restore_state
 163:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 163              		.loc 1 163 5 is_stmt 1 view .LVU32
 164 0022 03AA     		add	r2, sp, #12
 165 0024 2146     		mov	r1, r4
 166 0026 0948     		ldr	r0, .L21
 167              	.LVL17:
 163:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 168              		.loc 1 163 5 is_stmt 0 view .LVU33
 169 0028 FFF7FEFF 		bl	USBH_MSC_GetLUNInfo
 170              	.LVL18:
 165:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 171              		.loc 1 165 5 is_stmt 1 view .LVU34
 165:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 172              		.loc 1 165 23 is_stmt 0 view .LVU35
 173 002c 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 165:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 174              		.loc 1 165 5 view .LVU36
 175 0030 282B     		cmp	r3, #40
 176 0032 07D0     		beq	.L11
 177 0034 3A2B     		cmp	r3, #58
 178 0036 07D0     		beq	.L12
 179 0038 042B     		cmp	r3, #4
 180 003a 01D0     		beq	.L20
 175:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 181              		.loc 1 175 11 view .LVU37
 182 003c 0120     		movs	r0, #1
 183 003e EEE7     		b	.L9
 184              	.L20:
 165:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 185              		.loc 1 165 5 view .LVU38
 186 0040 0320     		movs	r0, #3
 187 0042 ECE7     		b	.L9
 188              	.L11:
 189 0044 0320     		movs	r0, #3
 190 0046 EAE7     		b	.L9
 191              	.L12:
 192 0048 0320     		movs	r0, #3
 193 004a E8E7     		b	.L9
 194              	.L22:
 195              		.align	2
 196              	.L21:
 197 004c 00000000 		.word	hUsbHostFS
 198              		.cfi_endproc
 199              	.LFE70:
 201              		.section	.text.USBH_ioctl,"ax",%progbits
 202              		.align	1
 203              		.global	USBH_ioctl
 204              		.syntax unified
 205              		.thumb
 206              		.thumb_func
 207              		.fpu softvfp
 209              	USBH_ioctl:
ARM GAS  /tmp/cck0gfKE.s 			page 8


 210              	.LVL19:
 211              	.LFB72:
 182:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 183:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
 184:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief  Writes Sector(s)
 185:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  lun : lun id 
 186:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  *buff: Data to be written
 187:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  sector: Sector address (LBA)
 188:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  count: Number of sectors to write (1..128)
 189:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @retval DRESULT: Operation result
 190:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */
 191:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_WRITE == 1
 192:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DRESULT USBH_write(BYTE lun, const BYTE *buff, DWORD sector, UINT count)
 193:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
 194:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR; 
 195:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   MSC_LUNTypeDef info;
 196:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_StatusTypeDef  status = USBH_OK;  
 197:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 198:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   if ((DWORD)buff & 3) /* DMA Alignment issue, do single up to aligned buffer */
 199:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 200:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_BUFF_WO_ALIGNMENT == 0
 201:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     while (count--)
 202:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 203:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       memcpy (scratch, &buff[count * _MAX_SS], _MAX_SS);
 204:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       
 205:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       status = USBH_MSC_Write(&HOST_HANDLE, lun, sector + count, (BYTE *)scratch, 1) ;
 206:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       if(status == USBH_FAIL)
 207:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       {
 208:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****         break;
 209:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       }
 210:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 211:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #else
 212:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     return res;
 213:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif
 214:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 215:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   else
 216:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     status = USBH_MSC_Write(&HOST_HANDLE, lun, sector, (BYTE *)buff, count);
 218:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 219:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 220:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   if(status == USBH_OK)
 221:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 222:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_OK;
 223:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 224:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   else
 225:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 226:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     USBH_MSC_GetLUNInfo(&HOST_HANDLE, lun, &info); 
 227:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     switch (info.sense.asc)
 229:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 230:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_WRITE_PROTECTED:
 231:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       USBH_ErrLog("USB Disk is Write protected!");
 232:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_WRPRT;
 233:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 234:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       
 235:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_LOGICAL_UNIT_NOT_READY:
 236:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_MEDIUM_NOT_PRESENT:
ARM GAS  /tmp/cck0gfKE.s 			page 9


 237:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     case SCSI_ASC_NOT_READY_TO_READY_CHANGE:
 238:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       USBH_ErrLog("USB Disk is not ready!");      
 239:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_NOTRDY;
 240:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break; 
 241:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       
 242:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     default:
 243:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_ERROR;
 244:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 245:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 246:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 247:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 248:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   return res;   
 249:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** }
 250:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_WRITE == 1 */
 251:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 252:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** /**
 253:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @brief  I/O control operation
 254:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  lun : lun id
 255:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  cmd: Control code
 256:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @param  *buff: Buffer to send/receive control data
 257:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   * @retval DRESULT: Operation result
 258:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   */
 259:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #if _USE_IOCTL == 1
 260:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** DRESULT USBH_ioctl(BYTE lun, BYTE cmd, void *buff)
 261:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** {
 212              		.loc 1 261 1 is_stmt 1 view -0
 213              		.cfi_startproc
 214              		@ args = 0, pretend = 0, frame = 56
 215              		@ frame_needed = 0, uses_anonymous_args = 0
 216              		.loc 1 261 1 is_stmt 0 view .LVU40
 217 0000 30B5     		push	{r4, r5, lr}
 218              	.LCFI5:
 219              		.cfi_def_cfa_offset 12
 220              		.cfi_offset 4, -12
 221              		.cfi_offset 5, -8
 222              		.cfi_offset 14, -4
 223 0002 8FB0     		sub	sp, sp, #60
 224              	.LCFI6:
 225              		.cfi_def_cfa_offset 72
 226 0004 0C46     		mov	r4, r1
 227 0006 1546     		mov	r5, r2
 262:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR;
 228              		.loc 1 262 3 is_stmt 1 view .LVU41
 229              	.LVL20:
 263:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   MSC_LUNTypeDef info;
 230              		.loc 1 263 3 view .LVU42
 264:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
 265:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   switch (cmd)
 231              		.loc 1 265 3 view .LVU43
 232 0008 0329     		cmp	r1, #3
 233 000a 23D8     		bhi	.L30
 234 000c DFE801F0 		tbb	[pc, r1]
 235              	.L26:
 236 0010 02       		.byte	(.L29-.L26)/2
 237 0011 05       		.byte	(.L28-.L26)/2
 238 0012 0E       		.byte	(.L27-.L26)/2
 239 0013 18       		.byte	(.L25-.L26)/2
ARM GAS  /tmp/cck0gfKE.s 			page 10


 240              		.p2align 1
 241              	.L29:
 261:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR;
 242              		.loc 1 261 1 is_stmt 0 view .LVU44
 243 0014 0846     		mov	r0, r1
 244              	.LVL21:
 245              	.L24:
 266:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 267:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   /* Make sure that no pending write process */
 268:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   case CTRL_SYNC: 
 269:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_OK;
 270:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     break;
 271:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 272:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   /* Get number of sectors on the disk (DWORD) */  
 273:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   case GET_SECTOR_COUNT : 
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     if(USBH_MSC_GetLUNInfo(&HOST_HANDLE, lun, &info) == USBH_OK)
 275:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 276:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       *(DWORD*)buff = info.capacity.block_nbr;
 277:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 278:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 279:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     else
 280:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 281:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_ERROR;
 282:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 283:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     break;
 284:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 285:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   /* Get R/W sector size (WORD) */  
 286:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   case GET_SECTOR_SIZE :	
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     if(USBH_MSC_GetLUNInfo(&HOST_HANDLE, lun, &info) == USBH_OK)
 288:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 289:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       *(DWORD*)buff = info.capacity.block_size;
 290:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 291:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 292:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     else
 293:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 294:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_ERROR;
 295:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 296:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     break;
 297:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 298:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     /* Get erase block size in unit of sector (DWORD) */ 
 299:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   case GET_BLOCK_SIZE : 
 300:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     if(USBH_MSC_GetLUNInfo(&HOST_HANDLE, lun, &info) == USBH_OK)
 302:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 303:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       *(DWORD*)buff = info.capacity.block_size;
 304:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 305:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 306:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     else
 307:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 308:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_ERROR;
 309:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 310:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     break;
 311:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 312:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   default:
 313:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     res = RES_PARERR;
 314:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 315:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   
ARM GAS  /tmp/cck0gfKE.s 			page 11


 316:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   return res;
 246              		.loc 1 316 3 is_stmt 1 view .LVU45
 317:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** }
 247              		.loc 1 317 1 is_stmt 0 view .LVU46
 248 0016 0FB0     		add	sp, sp, #60
 249              	.LCFI7:
 250              		.cfi_remember_state
 251              		.cfi_def_cfa_offset 12
 252              		@ sp needed
 253 0018 30BD     		pop	{r4, r5, pc}
 254              	.LVL22:
 255              	.L28:
 256              	.LCFI8:
 257              		.cfi_restore_state
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 258              		.loc 1 274 5 is_stmt 1 view .LVU47
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 259              		.loc 1 274 8 is_stmt 0 view .LVU48
 260 001a 01AA     		add	r2, sp, #4
 261              	.LVL23:
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 262              		.loc 1 274 8 view .LVU49
 263 001c 0146     		mov	r1, r0
 264              	.LVL24:
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 265              		.loc 1 274 8 view .LVU50
 266 001e 1148     		ldr	r0, .L35
 267              	.LVL25:
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 268              		.loc 1 274 8 view .LVU51
 269 0020 FFF7FEFF 		bl	USBH_MSC_GetLUNInfo
 270              	.LVL26:
 274:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 271              		.loc 1 274 7 view .LVU52
 272 0024 C0B9     		cbnz	r0, .L31
 276:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 273              		.loc 1 276 7 is_stmt 1 view .LVU53
 276:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 274              		.loc 1 276 36 is_stmt 0 view .LVU54
 275 0026 029B     		ldr	r3, [sp, #8]
 276:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 276              		.loc 1 276 21 view .LVU55
 277 0028 2B60     		str	r3, [r5]
 277:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 278              		.loc 1 277 7 is_stmt 1 view .LVU56
 279              	.LVL27:
 277:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 280              		.loc 1 277 7 is_stmt 0 view .LVU57
 281 002a F4E7     		b	.L24
 282              	.LVL28:
 283              	.L27:
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 284              		.loc 1 287 5 is_stmt 1 view .LVU58
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 285              		.loc 1 287 8 is_stmt 0 view .LVU59
 286 002c 01AA     		add	r2, sp, #4
 287              	.LVL29:
ARM GAS  /tmp/cck0gfKE.s 			page 12


 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 288              		.loc 1 287 8 view .LVU60
 289 002e 0146     		mov	r1, r0
 290              	.LVL30:
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 291              		.loc 1 287 8 view .LVU61
 292 0030 0C48     		ldr	r0, .L35
 293              	.LVL31:
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 294              		.loc 1 287 8 view .LVU62
 295 0032 FFF7FEFF 		bl	USBH_MSC_GetLUNInfo
 296              	.LVL32:
 287:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 297              		.loc 1 287 7 view .LVU63
 298 0036 88B9     		cbnz	r0, .L32
 289:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 299              		.loc 1 289 7 is_stmt 1 view .LVU64
 289:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 300              		.loc 1 289 36 is_stmt 0 view .LVU65
 301 0038 BDF80C30 		ldrh	r3, [sp, #12]
 289:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 302              		.loc 1 289 21 view .LVU66
 303 003c 2B60     		str	r3, [r5]
 290:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 304              		.loc 1 290 7 is_stmt 1 view .LVU67
 305              	.LVL33:
 290:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 306              		.loc 1 290 7 is_stmt 0 view .LVU68
 307 003e EAE7     		b	.L24
 308              	.LVL34:
 309              	.L25:
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 310              		.loc 1 301 5 is_stmt 1 view .LVU69
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 311              		.loc 1 301 8 is_stmt 0 view .LVU70
 312 0040 01AA     		add	r2, sp, #4
 313              	.LVL35:
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 314              		.loc 1 301 8 view .LVU71
 315 0042 0146     		mov	r1, r0
 316              	.LVL36:
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 317              		.loc 1 301 8 view .LVU72
 318 0044 0748     		ldr	r0, .L35
 319              	.LVL37:
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 320              		.loc 1 301 8 view .LVU73
 321 0046 FFF7FEFF 		bl	USBH_MSC_GetLUNInfo
 322              	.LVL38:
 301:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 323              		.loc 1 301 7 view .LVU74
 324 004a 48B9     		cbnz	r0, .L33
 303:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 325              		.loc 1 303 7 is_stmt 1 view .LVU75
 303:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 326              		.loc 1 303 36 is_stmt 0 view .LVU76
 327 004c BDF80C30 		ldrh	r3, [sp, #12]
ARM GAS  /tmp/cck0gfKE.s 			page 13


 303:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       res = RES_OK;
 328              		.loc 1 303 21 view .LVU77
 329 0050 2B60     		str	r3, [r5]
 304:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 330              		.loc 1 304 7 is_stmt 1 view .LVU78
 331              	.LVL39:
 304:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 332              		.loc 1 304 7 is_stmt 0 view .LVU79
 333 0052 E0E7     		b	.L24
 334              	.LVL40:
 335              	.L30:
 313:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 336              		.loc 1 313 9 view .LVU80
 337 0054 0420     		movs	r0, #4
 338              	.LVL41:
 313:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 339              		.loc 1 313 9 view .LVU81
 340 0056 DEE7     		b	.L24
 341              	.LVL42:
 342              	.L31:
 281:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 343              		.loc 1 281 11 view .LVU82
 344 0058 2046     		mov	r0, r4
 345 005a DCE7     		b	.L24
 346              	.L32:
 294:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 347              		.loc 1 294 11 view .LVU83
 348 005c 0120     		movs	r0, #1
 349 005e DAE7     		b	.L24
 350              	.L33:
 308:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     }
 351              		.loc 1 308 11 view .LVU84
 352 0060 0120     		movs	r0, #1
 353 0062 D8E7     		b	.L24
 354              	.L36:
 355              		.align	2
 356              	.L35:
 357 0064 00000000 		.word	hUsbHostFS
 358              		.cfi_endproc
 359              	.LFE72:
 361              		.section	.text.USBH_write,"ax",%progbits
 362              		.align	1
 363              		.global	USBH_write
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu softvfp
 369              	USBH_write:
 370              	.LVL43:
 371              	.LFB71:
 193:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR; 
 372              		.loc 1 193 1 is_stmt 1 view -0
 373              		.cfi_startproc
 374              		@ args = 0, pretend = 0, frame = 56
 375              		@ frame_needed = 0, uses_anonymous_args = 0
 194:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   MSC_LUNTypeDef info;
 376              		.loc 1 194 3 view .LVU86
ARM GAS  /tmp/cck0gfKE.s 			page 14


 195:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   USBH_StatusTypeDef  status = USBH_OK;  
 377              		.loc 1 195 3 view .LVU87
 196:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** 
 378              		.loc 1 196 3 view .LVU88
 198:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 379              		.loc 1 198 3 view .LVU89
 198:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 380              		.loc 1 198 6 is_stmt 0 view .LVU90
 381 0000 11F0030F 		tst	r1, #3
 382 0004 01D0     		beq	.L49
 212:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif
 383              		.loc 1 212 12 view .LVU91
 384 0006 0120     		movs	r0, #1
 385              	.LVL44:
 249:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_WRITE == 1 */
 386              		.loc 1 249 1 view .LVU92
 387 0008 7047     		bx	lr
 388              	.LVL45:
 389              	.L49:
 193:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   DRESULT res = RES_ERROR; 
 390              		.loc 1 193 1 view .LVU93
 391 000a 10B5     		push	{r4, lr}
 392              	.LCFI9:
 393              		.cfi_def_cfa_offset 8
 394              		.cfi_offset 4, -8
 395              		.cfi_offset 14, -4
 396 000c 90B0     		sub	sp, sp, #64
 397              	.LCFI10:
 398              		.cfi_def_cfa_offset 72
 399 000e 0446     		mov	r4, r0
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 400              		.loc 1 217 5 is_stmt 1 view .LVU94
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 401              		.loc 1 217 14 is_stmt 0 view .LVU95
 402 0010 0093     		str	r3, [sp]
 403 0012 0B46     		mov	r3, r1
 404              	.LVL46:
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 405              		.loc 1 217 14 view .LVU96
 406 0014 0146     		mov	r1, r0
 407              	.LVL47:
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 408              		.loc 1 217 14 view .LVU97
 409 0016 1148     		ldr	r0, .L53
 410              	.LVL48:
 217:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   }
 411              		.loc 1 217 14 view .LVU98
 412 0018 FFF7FEFF 		bl	USBH_MSC_Write
 413              	.LVL49:
 220:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 414              		.loc 1 220 3 is_stmt 1 view .LVU99
 220:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****   {
 415              		.loc 1 220 5 is_stmt 0 view .LVU100
 416 001c 08B9     		cbnz	r0, .L50
 417              	.LVL50:
 418              	.L38:
 249:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c **** #endif /* _USE_WRITE == 1 */
ARM GAS  /tmp/cck0gfKE.s 			page 15


 419              		.loc 1 249 1 view .LVU101
 420 001e 10B0     		add	sp, sp, #64
 421              	.LCFI11:
 422              		.cfi_remember_state
 423              		.cfi_def_cfa_offset 8
 424              		@ sp needed
 425 0020 10BD     		pop	{r4, pc}
 426              	.LVL51:
 427              	.L50:
 428              	.LCFI12:
 429              		.cfi_restore_state
 226:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 430              		.loc 1 226 5 is_stmt 1 view .LVU102
 431 0022 03AA     		add	r2, sp, #12
 432 0024 2146     		mov	r1, r4
 433 0026 0D48     		ldr	r0, .L53
 434              	.LVL52:
 226:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     
 435              		.loc 1 226 5 is_stmt 0 view .LVU103
 436 0028 FFF7FEFF 		bl	USBH_MSC_GetLUNInfo
 437              	.LVL53:
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 438              		.loc 1 228 5 is_stmt 1 view .LVU104
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 439              		.loc 1 228 23 is_stmt 0 view .LVU105
 440 002c 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 441              		.loc 1 228 5 view .LVU106
 442 0030 272B     		cmp	r3, #39
 443 0032 0CD0     		beq	.L41
 444 0034 05D9     		bls	.L51
 445 0036 282B     		cmp	r3, #40
 446 0038 0BD0     		beq	.L43
 447 003a 3A2B     		cmp	r3, #58
 448 003c 0BD1     		bne	.L44
 239:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break; 
 449              		.loc 1 239 11 view .LVU107
 450 003e 0320     		movs	r0, #3
 451 0040 EDE7     		b	.L38
 452              	.L51:
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 453              		.loc 1 228 5 view .LVU108
 454 0042 042B     		cmp	r3, #4
 455 0044 01D0     		beq	.L52
 243:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 456              		.loc 1 243 11 view .LVU109
 457 0046 0120     		movs	r0, #1
 458 0048 E9E7     		b	.L38
 459              	.L52:
 239:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break; 
 460              		.loc 1 239 11 view .LVU110
 461 004a 0320     		movs	r0, #3
 462 004c E7E7     		b	.L38
 463              	.L41:
 228:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****     {
 464              		.loc 1 228 5 view .LVU111
 465 004e 0220     		movs	r0, #2
ARM GAS  /tmp/cck0gfKE.s 			page 16


 466 0050 E5E7     		b	.L38
 467              	.L43:
 239:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break; 
 468              		.loc 1 239 11 view .LVU112
 469 0052 0320     		movs	r0, #3
 470 0054 E3E7     		b	.L38
 471              	.L44:
 243:Middlewares/Third_Party/FatFs/src/drivers/usbh_diskio.c ****       break;
 472              		.loc 1 243 11 view .LVU113
 473 0056 0120     		movs	r0, #1
 474 0058 E1E7     		b	.L38
 475              	.L54:
 476 005a 00BF     		.align	2
 477              	.L53:
 478 005c 00000000 		.word	hUsbHostFS
 479              		.cfi_endproc
 480              	.LFE71:
 482              		.global	USBH_Driver
 483              		.section	.rodata.USBH_Driver,"a"
 484              		.align	2
 487              	USBH_Driver:
 488 0000 00000000 		.word	USBH_initialize
 489 0004 00000000 		.word	USBH_status
 490 0008 00000000 		.word	USBH_read
 491 000c 00000000 		.word	USBH_write
 492 0010 00000000 		.word	USBH_ioctl
 493              		.text
 494              	.Letext0:
 495              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 496              		.file 3 "/usr/include/newlib/sys/_types.h"
 497              		.file 4 "/usr/include/newlib/sys/reent.h"
 498              		.file 5 "/usr/include/newlib/sys/lock.h"
 499              		.file 6 "Middlewares/Third_Party/FatFs/src/integer.h"
 500              		.file 7 "Middlewares/Third_Party/FatFs/src/diskio.h"
 501              		.file 8 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 502              		.file 9 "Drivers/CMSIS/Include/core_cm3.h"
 503              		.file 10 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 504              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 505              		.file 12 "/usr/include/newlib/stdlib.h"
 506              		.file 13 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 507              		.file 14 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 508              		.file 15 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 509              		.file 16 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 510              		.file 17 "Middlewares/Third_Party/FatFs/src/ff_gen_drv.h"
ARM GAS  /tmp/cck0gfKE.s 			page 17


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_diskio.c
     /tmp/cck0gfKE.s:16     .text.USBH_initialize:0000000000000000 $t
     /tmp/cck0gfKE.s:24     .text.USBH_initialize:0000000000000000 USBH_initialize
     /tmp/cck0gfKE.s:43     .text.USBH_status:0000000000000000 $t
     /tmp/cck0gfKE.s:50     .text.USBH_status:0000000000000000 USBH_status
     /tmp/cck0gfKE.s:90     .text.USBH_status:0000000000000014 $d
     /tmp/cck0gfKE.s:95     .text.USBH_read:0000000000000000 $t
     /tmp/cck0gfKE.s:102    .text.USBH_read:0000000000000000 USBH_read
     /tmp/cck0gfKE.s:197    .text.USBH_read:000000000000004c $d
     /tmp/cck0gfKE.s:202    .text.USBH_ioctl:0000000000000000 $t
     /tmp/cck0gfKE.s:209    .text.USBH_ioctl:0000000000000000 USBH_ioctl
     /tmp/cck0gfKE.s:236    .text.USBH_ioctl:0000000000000010 $d
     /tmp/cck0gfKE.s:240    .text.USBH_ioctl:0000000000000014 $t
     /tmp/cck0gfKE.s:357    .text.USBH_ioctl:0000000000000064 $d
     /tmp/cck0gfKE.s:362    .text.USBH_write:0000000000000000 $t
     /tmp/cck0gfKE.s:369    .text.USBH_write:0000000000000000 USBH_write
     /tmp/cck0gfKE.s:478    .text.USBH_write:000000000000005c $d
     /tmp/cck0gfKE.s:487    .rodata.USBH_Driver:0000000000000000 USBH_Driver
     /tmp/cck0gfKE.s:484    .rodata.USBH_Driver:0000000000000000 $d

UNDEFINED SYMBOLS
USBH_MSC_UnitIsReady
hUsbHostFS
USBH_MSC_Read
USBH_MSC_GetLUNInfo
USBH_MSC_Write
